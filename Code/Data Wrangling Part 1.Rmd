---
title: "Data Wrangling Part 1"
author: "Candela Cerpa & Samantha Pace & Vinny Whatley"
date: "2023-11-20"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#install.packages("tidyverse") # This code chunk installs the tidyverse package.
#install.packages("lubridate") # This code chunk install lubridate package.
#install.packages("here") # This code chunk will install the here package.
#install.packages("zoo")
# they are all now comments so it will knit.

library(tidyverse)
library(lubridate)
library(here)
library(zoo)

here()
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.



```{r data wrangling}
PhoenixAZ_processed <- read.csv(here("./Data/Raw/phoenix_fountainhills_raw.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "PHOENIX AIRPORT, AZ US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = ymd(DATE))

FountainHillsAZ_processed <- read.csv(here("./Data/Raw/phoenix_fountainhills_raw.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "FOUNTAIN HILLS, AZ US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = ymd(DATE))

LasVegasNV_processed <- read.csv(here("./Data/Raw/Nevada_data_raw.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "MCCARRAN INTERNATIONAL AIRPORT, NV US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = ymd(DATE))

PahrumpNV_processed <- read.csv(here("./Data/Raw/Nevada_data_raw.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "PAHRUMP 4 NW, NV US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = ymd(DATE))

SanDiegoCA_processed <- read.csv(here("./Data/Raw/SanDiego_Ramona_Raw_Data.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "SAN DIEGO INTERNATIONAL AIRPORT, CA US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = mdy(DATE))

RamonaCA_processed <- read.csv(here("./Data/Raw/SanDiego_Ramona_Raw_Data.csv"), stringsAsFactors = TRUE) %>% 
  filter(NAME == "RAMONA AIRPORT, CA US") %>% 
  select(NAME, DATE, PRCP, PSUN, TMAX, TMIN, TAVG, TSUN) %>% 
  mutate(DATE = mdy(DATE))
```

## Editting the Column Names

```{r update column names, echo=FALSE}
colnames(PhoenixAZ_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")

colnames(FountainHillsAZ_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")

colnames(LasVegasNV_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")

colnames(PahrumpNV_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")

colnames(SanDiegoCA_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")

colnames(RamonaCA_processed) <-
  c("Location", "Date", "Precipitation", "%_Sunshine_Possible", "Daily_Temp_Max", "Daily_Temp_Min", "Temp_Avg", "Total_Sunshine")
```

```{r data summaries}
# Determining which locations and columns have the most NA's for max and min daily temperatures, therefore determining which to interpolate
summary(PhoenixAZ_processed)
summary(FountainHillsAZ_processed)
summary(LasVegasNV_processed)
summary(PahrumpNV_processed)
summary(SanDiegoCA_processed)
summary(RamonaCA_processed)
```

```{r linear interpolation}
# FountainHills, Pahrump, Ramona requires interpolation for the min and max temps.

# Linear interpolation for FountainHillsAZ
FountainHillsAZ_processed <-
  FountainHillsAZ_processed %>% 
  mutate(Daily_Temp_Max = na.approx(Daily_Temp_Max), 
         Daily_Temp_Min = na.approx(Daily_Temp_Min))

# Showing that there are no longer NA's in either of these columns.
summary(PhoenixAZ_processed$Daily_Temp_Max)
summary(PhoenixAZ_processed$Daily_Temp_Min)

# Linear interpolation for Pahrump
PahrumpNV_processed <-
  PahrumpNV_processed %>% 
  mutate(Daily_Temp_Max = na.approx(Daily_Temp_Max), 
         Daily_Temp_Min = na.approx(Daily_Temp_Min))

# Showing that there are no longer NA's in either of these columns.
summary(PahrumpNV_processed$Daily_Temp_Max)
summary(PahrumpNV_processed$Daily_Temp_Min)

# Linear interpolation for Ramona
RamonaCA_processed <-
  RamonaCA_processed %>% 
  mutate(Daily_Temp_Max = na.approx(Daily_Temp_Max), 
         Daily_Temp_Min = na.approx(Daily_Temp_Min))

# Showing that there are no longer NA's in either of these columns.
summary(RamonaCA_processed$Daily_Temp_Max)
summary(RamonaCA_processed$Daily_Temp_Min)
```
```{r updating the average columns}
PhoenixAZ_processed$Temp_Avg <- 
  rowMeans(PhoenixAZ_processed [, c(5, 6)], na.rm = T)

FountainHillsAZ_processed$Temp_Avg <- 
  rowMeans(FountainHillsAZ_processed [, c(5, 6)], na.rm = T)

PahrumpNV_processed$Temp_Avg <- 
  rowMeans(PahrumpNV_processed [, c(5, 6)], na.rm = T)

LasVegasNV_processed$Temp_Avg <- 
  rowMeans(LasVegasNV_processed [, c(5, 6)], na.rm = T)

SanDiegoCA_processed$Temp_Avg <- 
  rowMeans(SanDiegoCA_processed [, c(5, 6)], na.rm = T)

RamonaCA_processed$Temp_Avg <- 
  rowMeans(RamonaCA_processed [, c(5, 6)], na.rm = T)
```


```{r data saving, echo=FALSE}

write.csv(PhoenixAZ_processed, 
          file = "./Data/Processed/PhoenixAZ_processed")

write.csv(FountainHillsAZ_processed, 
          file = "./Data/Processed/FountainHillsAZ_processed")

write.csv(LasVegasNV_processed, 
          file = "./Data/Processed/LasVegasNV_processed")

write.csv(PahrumpNV_processed, 
          file = "./Data/Processed/PahrumpNV_processed")

write.csv(SanDiegoCA_processed, 
          file = "./Data/Processed/SanDiegoCA_processed")

write.csv(RamonaCA_processed, 
          file = "./Data/Processed/RamonaCA_processed")
```

Hello! Does this work?
